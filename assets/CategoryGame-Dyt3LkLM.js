import{j as r,_ as n}from"./index-Bitz-2zT.js";import{f as J,u as K,e as W,b as a}from"./vendor-BpP_d66U.js";import{c as X}from"./data-BMgbbSwK.js";import{b as Y}from"./banner-GS78naYI.js";const Z=(j,p,w)=>{const d=j[p];return d?typeof d=="function"?d():Promise.resolve(d):new Promise((m,_)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(_.bind(null,new Error("Unknown variable dynamic import: "+p+(p.split("/").length!==w?". Note that variables only represent file names one level deep.":""))))})};function ne(){var O,D,V;const{mainCategorySlug:j,subcategorySlug:p}=J(),w=K(),d=W(),m=((O=d.state)==null?void 0:O.timer)||15,_=((D=d.state)==null?void 0:D.mainCategory)||(j?j.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase()):""),v=((V=d.state)==null?void 0:V.subcategory)||(p?p.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase()):""),[l,Q]=a.useState([]),[k,S]=a.useState(null),[N,T]=a.useState(m),[u,P]=a.useState(0),[I,M]=a.useState(0),[y,$]=a.useState("countdown"),[q,B]=a.useState(3),[A,U]=a.useState(!1);async function R(t,s){const o=X.find(e=>e.name.toLowerCase()===t.toLowerCase());if(!o)return null;const f=o.subcategories.find(e=>e.name.toLowerCase()===s.toLowerCase());return f?(await Z(Object.assign({"../data/animalQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.b),[]),"../data/astronomyQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.d),[]),"../data/bollywoodMoviesQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.e),[]),"../data/bollywoodPopCultureQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.f),[]),"../data/bollywoodTVShowsQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.h),[]),"../data/categories.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.a),[]),"../data/foodAndCultureQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.i),[]),"../data/geographyQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.j),[]),"../data/historyQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.k),[]),"../data/hollywoodMoviesQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.l),[]),"../data/hollywoodPopCultureQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.m),[]),"../data/hollywoodTVShowsQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.n),[]),"../data/scienceQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.s),[]),"../data/techQuestions.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.o),[]),"../data/titles.js":()=>n(()=>import("./data-BMgbbSwK.js").then(e=>e.t),[])}),`../data/${f.file}.js`,3)).default:null}a.useEffect(()=>{let t=!0;async function s(){const o=await R(_,v);if(!o){w("/");return}function f(i,h,g){return i.filter(L=>!g.has(L)).sort(()=>Math.random()-.5).slice(0,h)}const E=Math.floor(Math.min(o.trueStatements.length/2,o.bluffs.length)),e=new Set,c=new Set,b=[];for(let i=0;i<E;i++){const h=f(o.trueStatements,2,e);h.forEach(L=>e.add(L));const g=f(o.bluffs,1,c)[0];c.add(g);const x=[...h,g].sort(()=>Math.random()-.5),C=x.indexOf(g);b.push({statements:x,answer:C})}t&&Q(b)}return s(),()=>{t=!1}},[_,v,w]),a.useEffect(()=>{if(y==="countdown"){const t=setInterval(()=>{B(s=>s===1?(clearInterval(t),$("game"),0):s-1)},1e3);return()=>clearInterval(t)}},[y]),a.useEffect(()=>{if(y==="game"){const t=setInterval(()=>{T(s=>s===1?(clearInterval(t),H(),0):s-1)},1e3);return()=>clearInterval(t)}},[y,u]),a.useEffect(()=>{A&&(S(null),P(t=>t+1),T(m),U(!1))},[A,m]);const G=async()=>{const t=await R(_,v);if(!t)return;function s(c,b,i){return c.filter(x=>!i.has(x)).sort(()=>Math.random()-.5).slice(0,b)}const o=Math.floor(Math.min(t.trueStatements.length/2,t.bluffs.length)),f=new Set,E=new Set,e=[];for(let c=0;c<o;c++){const b=s(t.trueStatements,2,f);b.forEach(x=>f.add(x));const i=s(t.bluffs,1,E)[0];E.add(i);const h=[...b,i].sort(()=>Math.random()-.5),g=h.indexOf(i);e.push({statements:h,answer:g})}Q(c=>[...c,...e])},H=()=>{w("/game-over",{state:{score:I,category:`${_} - ${v}`,timer:m}})},z=t=>{S(t);const s=l[u].answer;t===s?(M(o=>o+1),u+1<l.length?setTimeout(()=>{S(null),P(o=>o+1),T(m)},1e3):(G(),setTimeout(()=>{S(null),P(o=>o+1),T(m)},1e3))):setTimeout(()=>{w("/answer",{state:{score:I,category:`${_} - ${v}`,timer:m,correctAnswer:l[u].statements[s],explanation:l[u].explanation||"That was the bluff!"}})},1e3)};if(y==="countdown")return r.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex flex-col justify-center items-center p-4 text-center transition-colors duration-200",children:[r.jsx("h1",{className:"text-6xl font-bold text-red-600",children:q}),r.jsx("p",{className:"text-lg mt-4 text-gray-900 dark:text-gray-100",children:"Get ready!"})]});if(!l||l.length===0||!l[u])return r.jsx("div",{className:"h-auto sm:min-h-screen bg-white dark:bg-gray-900 flex flex-col justify-center items-center p-4 text-center transition-colors duration-200",children:r.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"No questions available!"})});const{statements:F}=l[u];return r.jsxs("div",{className:"h-auto sm:min-h-screen bg-white dark:bg-gray-900 flex flex-col justify-center items-center p-4 text-center transition-colors duration-200",children:[r.jsx("img",{src:Y,alt:"Bluff Buster Banner",className:"w-24 sm:w-32 mb-2"}),r.jsx("h1",{className:"text-3xl sm:text-2xl font-bold mb-2 text-red-600",children:"Spot the Bluff!"}),r.jsxs("div",{className:"text-2xl font-semibold mb-2 text-gray-900 dark:text-gray-100",children:["Time Left: ",N,"s"]}),r.jsxs("div",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-gray-100",children:["Score: ",I]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 sm:p-6 w-full max-w-sm sm:max-w-md text-xl transition-colors duration-200",children:F.map((t,s)=>r.jsx("button",{onClick:()=>z(s),disabled:k!==null,className:`block w-full text-center p-4 sm:p-5 mb-2 rounded-lg border transition-all duration-300 ${k===s?s===l[u].answer?"border-green-500 bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"border-red-500 bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"border-gray-300 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-100"}`,children:t},`${u}-${s}`))})]})}export{ne as default};
