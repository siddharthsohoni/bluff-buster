import{j as r,_ as o}from"./index-D4D9s22l.js";import{f as K,u as W,e as X,b as a}from"./vendor-D1mFCOAK.js";import{g as M,c as Y}from"./data-BMgbbSwK.js";import{b as Z}from"./banner-GS78naYI.js";const ee=(T,w,v)=>{const m=T[w];return m?typeof m=="function"?m():Promise.resolve(m):new Promise((f,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+w+(w.split("/").length!==v?". Note that variables only represent file names one level deep.":""))))})};function re(){var D,V,C;const{mainCategorySlug:T,subcategorySlug:w}=K(),v=W(),m=X(),f=((D=m.state)==null?void 0:D.timer)||15,l=((V=m.state)==null?void 0:V.mainCategory)||(T?T.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase()):""),b=((C=m.state)==null?void 0:C.subcategory)||(w?w.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase()):""),[u,Q]=a.useState([]),[k,S]=a.useState(null),[A,I]=a.useState(f),[c,P]=a.useState(0),[y,$]=a.useState(0),[E,q]=a.useState("countdown"),[B,U]=a.useState(3),[R,G]=a.useState(!1);async function O(t,s){const n=Y.find(e=>e.name.toLowerCase()===t.toLowerCase());if(!n)return null;const g=n.subcategories.find(e=>e.name.toLowerCase()===s.toLowerCase());return g?(await ee(Object.assign({"../data/animalQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.b),[]),"../data/astronomyQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.d),[]),"../data/bollywoodMoviesQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.e),[]),"../data/bollywoodPopCultureQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.f),[]),"../data/bollywoodTVShowsQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.h),[]),"../data/categories.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.a),[]),"../data/foodAndCultureQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.i),[]),"../data/geographyQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.j),[]),"../data/historyQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.k),[]),"../data/hollywoodMoviesQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.l),[]),"../data/hollywoodPopCultureQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.m),[]),"../data/hollywoodTVShowsQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.n),[]),"../data/scienceQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.s),[]),"../data/techQuestions.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.o),[]),"../data/titles.js":()=>o(()=>import("./data-BMgbbSwK.js").then(e=>e.t),[])}),`../data/${g.file}.js`,3)).default:null}a.useEffect(()=>{let t=!0;async function s(){const n=await O(l,b);if(!n){v("/");return}function g(i,h,_){return i.filter(L=>!_.has(L)).sort(()=>Math.random()-.5).slice(0,h)}const j=Math.floor(Math.min(n.trueStatements.length/2,n.bluffs.length)),e=new Set,d=new Set,x=[];for(let i=0;i<j;i++){const h=g(n.trueStatements,2,e);h.forEach(L=>e.add(L));const _=g(n.bluffs,1,d)[0];d.add(_);const p=[...h,_].sort(()=>Math.random()-.5),N=p.indexOf(_);x.push({statements:p,answer:N})}t&&Q(x)}return s(),()=>{t=!1}},[l,b,v]),a.useEffect(()=>{if(E==="countdown"){const t=setInterval(()=>{U(s=>s===1?(clearInterval(t),q("game"),0):s-1)},1e3);return()=>clearInterval(t)}},[E]),a.useEffect(()=>{if(E==="game"){const t=setInterval(()=>{I(s=>s===1?(clearInterval(t),z(),0):s-1)},1e3);return()=>clearInterval(t)}},[E,c]),a.useEffect(()=>{R&&(S(null),P(t=>t+1),I(f),G(!1))},[R,f]);const H=async()=>{const t=await O(l,b);if(!t)return;function s(d,x,i){return d.filter(p=>!i.has(p)).sort(()=>Math.random()-.5).slice(0,x)}const n=Math.floor(Math.min(t.trueStatements.length/2,t.bluffs.length)),g=new Set,j=new Set,e=[];for(let d=0;d<n;d++){const x=s(t.trueStatements,2,g);x.forEach(p=>g.add(p));const i=s(t.bluffs,1,j)[0];j.add(i);const h=[...x,i].sort(()=>Math.random()-.5),_=h.indexOf(i);e.push({statements:h,answer:_})}Q(d=>[...d,...e])},z=()=>{const t=M(y,`${l} - ${b}`);v("/game-over",{state:{score:y,category:`${l} - ${b}`,timer:f,userTitle:t}})},F=t=>{S(t);const s=u[c].answer;if(t===s)$(n=>n+1),c+1<u.length?setTimeout(()=>{S(null),P(n=>n+1),I(f)},1e3):(H(),setTimeout(()=>{S(null),P(n=>n+1),I(f)},1e3));else{const n=M(y,`${l} - ${b}`);clearInterval(A),v("/answer",{state:{score:y,category:`${l} - ${b}`,timer:f,correctAnswer:u[c].statements[s],explanation:u[c].explanation||"That was the bluff!",userTitle:n}})}};if(E==="countdown")return r.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex flex-col justify-center items-center p-4 text-center transition-colors duration-200",children:[r.jsx("h1",{className:"text-6xl font-bold text-red-600",children:B}),r.jsx("p",{className:"text-lg mt-4 text-gray-900 dark:text-gray-100",children:"Get ready!"})]});if(!u||u.length===0||!u[c])return r.jsx("div",{className:"h-auto sm:min-h-screen bg-white dark:bg-gray-900 flex flex-col justify-center items-center p-4 text-center transition-colors duration-200",children:r.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"No questions available!"})});const{statements:J}=u[c];return r.jsxs("div",{className:"h-auto sm:min-h-screen bg-white dark:bg-gray-900 flex flex-col justify-center items-center p-4 text-center transition-colors duration-200",children:[r.jsx("img",{src:Z,alt:"Bluff Buster Banner",className:"w-24 sm:w-32 mb-2"}),r.jsx("h1",{className:"text-3xl sm:text-2xl font-bold mb-2 text-red-600",children:"Spot the Bluff!"}),r.jsxs("div",{className:"text-2xl font-semibold mb-2 text-gray-900 dark:text-gray-100",children:["Time Left: ",A,"s"]}),r.jsxs("div",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-gray-100",children:["Score: ",y]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 sm:p-6 w-full max-w-sm sm:max-w-md text-xl transition-colors duration-200",children:J.map((t,s)=>r.jsx("button",{onClick:()=>F(s),disabled:k!==null,className:`block w-full text-center p-4 sm:p-5 mb-2 rounded-lg border transition-all duration-300 ${k===s?s===u[c].answer?"border-green-500 bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"border-red-500 bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"border-gray-300 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-100"}`,children:t},`${c}-${s}`))})]})}export{re as default};
